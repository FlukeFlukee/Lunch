<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üç± ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡πÑ‡∏£‡∏î‡∏µ ü´è</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 text-gray-800">
<div class="max-w-5xl mx-auto p-6">

<h1 class="text-3xl font-bold text-pink-600 mb-4">üç± ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡πÑ‡∏£‡∏î‡∏µ ü´è</h1>

<div id="todayOrderBox" class="mb-6 bg-white rounded-xl shadow p-6 text-center"></div>

<form id="mainForm" class="space-y-6 bg-white shadow-xl p-6 rounded-2xl">

<div>
  <h2 class="text-lg font-semibold mb-2">üë• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
  <div id="userBlocks" class="space-y-4"></div>
  <button type="button" onclick="addUserBlock()"
    class="bg-red-700 text-white px-4 py-2 rounded-lg">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á</button>
</div>

<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
  <div>
    <label>üí∏ ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</label>
    <input type="number" id="discount" class="w-full p-2 border rounded" value="0">
  </div>
  <div>
    <label>üöö ‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</label>
    <input type="number" id="delivery" class="w-full p-2 border rounded" value="0">
  </div>
</div>

<div class="border-t pt-4">
<h2 class="font-semibold mb-2">üí≥ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h2>

<label><input type="radio" name="payType" value="bank" checked> ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</label>
<label class="ml-4"><input type="radio" name="payType" value="promptpay"> ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå</label>

<div id="bankBox" class="mt-2">
<select id="bankName" class="w-full p-2 border rounded">
<option>‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢</option>
<option>‡πÑ‡∏ó‡∏¢‡∏û‡∏≤‡∏ì‡∏¥‡∏ä‡∏¢‡πå</option>
<option>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û</option>
<option>‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</option>
<option>‡∏Å‡∏£‡∏∏‡∏á‡∏®‡∏£‡∏µ</option>
<option>‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô</option>
</select>
<input id="bankNumber" class="w-full p-2 border rounded mt-2" placeholder="‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ">
</div>

<div id="promptBox" class="mt-2 hidden">
<input id="promptNumber" class="w-full p-2 border rounded" placeholder="‡πÄ‡∏•‡∏Ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå">
</div>
</div>

<button type="submit" class="bg-pink-600 text-white px-4 py-2 rounded">ü´è ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
</form>

<div id="resultSection" class="mt-8"></div>

<div class="mt-6">
<button onclick="toggleCalendar()" class="bg-blue-600 text-white px-4 py-2 rounded">
üìÖ ‡πÅ‡∏™‡∏î‡∏á / ‡∏ã‡πà‡∏≠‡∏ô ‡∏õ‡∏è‡∏¥‡∏ò‡∏¥‡∏ô
</button>
<div id="calendarSection" class="mt-4 hidden"></div>
</div>

</div>

<script>
/* ===== DATA ===== */
const defaultUsers=["‡∏û‡∏µ‡πà‡∏ü‡∏•‡∏∏‡πä‡∏Ñ","‡∏û‡∏µ‡πà‡∏ã‡∏¥‡∏ô","‡∏û‡∏µ‡πà‡∏ï‡∏±‡πä‡∏Å","‡∏û‡∏µ‡πà‡πÇ‡∏£‡∏™","‡∏û‡∏µ‡πà‡πÅ‡∏ö‡∏á‡∏Ñ‡πå","‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏¢","‡πÑ‡∏≠‡πà‡∏Ç‡∏ß‡∏±‡∏ç"];
const orderPersons=["‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏¢","‡∏û‡∏µ‡πà‡∏ü‡∏•‡∏∏‡πä‡∏Ñ","‡∏û‡∏µ‡πà‡πÇ‡∏£‡∏™","‡πÑ‡∏≠‡πà‡∏Ç‡∏ß‡∏±‡∏ç","‡∏û‡∏µ‡πà‡πÅ‡∏ö‡∏á‡∏Ñ‡πå"];

/* ===== USERS ===== */
function createMenuRow(){
  const d=document.createElement("div");
  d.className="grid grid-cols-2 gap-2";
  d.innerHTML='<input class="food-name p-2 border rounded" placeholder="‡πÄ‡∏°‡∏ô‡∏π"><input class="food-price p-2 border rounded" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">';
  return d;
}

function addUserBlock(name=""){
  const d=document.createElement("div");
  d.className="bg-gray-50 p-4 rounded";
  d.innerHTML='<input class="username p-2 border rounded mb-2" value="'+name+'"><div class="menu-list"></div><button type="button" class="bg-blue-500 text-white px-2 py-1 mt-2 rounded" onclick="addMenuToUser(this)">‚ûï ‡πÄ‡∏°‡∏ô‡∏π</button>';
  userBlocks.appendChild(d);
  d.querySelector(".menu-list").appendChild(createMenuRow());
}

function addMenuToUser(b){
  b.parentElement.querySelector(".menu-list").appendChild(createMenuRow());
}

/* ===== SUBMIT ===== */
mainForm.addEventListener("submit",function(e){
  e.preventDefault();

  const discountVal=Number(document.getElementById("discount").value)||0;
  const deliveryVal=Number(document.getElementById("delivery").value)||0;

  const orders=[];
  document.querySelectorAll("#userBlocks > div").forEach(b=>{
    const user=b.querySelector(".username").value;
    b.querySelectorAll(".food-price").forEach((p,i)=>{
      if(p.value){
        orders.push({
          user,
          name:b.querySelectorAll(".food-name")[i].value,
          price:Number(p.value)
        });
      }
    });
  });

  if(!orders.length){ alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π"); return; }

  const totalFood=orders.reduce((s,o)=>s+o.price,0);
  const total=totalFood-discountVal+deliveryVal;

  const payType=document.querySelector("input[name=payType]:checked").value;
  const payInfo=payType==="bank"
    ? `üè¶ ${bankName.value} ${bankNumber.value}`
    : `üì± ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå ${promptNumber.value}`;

  let rows="";
  orders.forEach(o=>{
    rows+=`<tr><td>${o.user}</td><td>${o.name}</td><td>${o.price}</td></tr>`;
  });

  resultSection.innerHTML=`
  <div class="bg-white p-6 rounded shadow">
  <h2 class="text-xl font-bold mb-3">üìä Summary</h2>
  <table class="w-full border text-center">
  <thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡πÄ‡∏°‡∏ô‡∏π</th><th>‡∏£‡∏≤‡∏Ñ‡∏≤</th></tr></thead>
  <tbody>${rows}</tbody>
  </table>
  <p class="mt-3 font-bold">‡∏£‡∏ß‡∏° ${total.toFixed(2)} ‡∏ö‡∏≤‡∏ó</p>
  <p class="mt-2">${payInfo}</p>
  </div>`;
});

/* ===== CALENDAR ===== */
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function generateCalendar(s,e){
  const c={},p=shuffle(orderPersons);let i=0;
  for(let d=new Date(s);d<=e;d.setDate(d.getDate()+1)){
    if(d.getDay()==0||d.getDay()==6)continue;
    if(i>=p.length){i=0;shuffle(p);}
    c[d.toISOString().split("T")[0]]=p[i++];
  }
  return c;
}
const calendarData=generateCalendar(new Date("2026-01-01"),new Date("2030-12-31"));

(function(){
  const k=new Date().toISOString().split("T")[0];
  todayOrderBox.innerHTML=`<h2 class="text-2xl font-bold">üç± ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á</h2><p class="text-3xl mt-2">${calendarData[k]||"‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏á"}</p>`;
})();

function toggleCalendar(){
  calendarSection.classList.toggle("hidden");
  if(calendarSection.innerHTML)return;
  calendarSection.innerHTML=Object.entries(calendarData).map(([d,p])=>`<div>${d} : <b>${p}</b></div>`).join("");
}

/* ===== PAY TYPE ===== */
document.querySelectorAll("input[name=payType]").forEach(r=>{
  r.onchange=()=>{
    bankBox.classList.toggle("hidden",r.value!=="bank");
    promptBox.classList.toggle("hidden",r.value!=="promptpay");
  };
});

defaultUsers.forEach(addUserBlock);
</script>
</body>
</html>
